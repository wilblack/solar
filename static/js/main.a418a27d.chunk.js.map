{"version":3,"sources":["types.ts","api-service.ts","services/attribute-map.ts","services/body.service.ts","components/home/Home.tsx","components/results/Results.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["LOCALSTORAGE_KEY","AttrType","api","baseUrl","get","url","queryParams","a","urlWithParams","stringify","console","log","axios","getOrCached","localStorageKey","localString","localStorage","getItem","localResults","JSON","parse","Promise","resolve","reject","results","setItem","data","bodies","fetchPlanets","excludedAttributes","filter","exclude","join","API_PLANETS","fetchEnglishNames","API_ENGLISH_NAMES","attrMap","attribute","columnName","type","STRING","weight","LIST","NUMBERIC","bodyService","ALL_ATTRIBUTES","getDataframe","str","CLEANED_DF","df","buildDataframe","buildExcludedAttributes","gameAttrs","map","v","concat","attr","indexOf","buildCleanEnglishLexicon","englishLexicon","cleanMoons","cleanAllFields","warn","rawNames","cleanedNames","raw","id","name","cleanName","rawEnglishName","cleanedName","replace","Home","useState","setplanets","planetOptions","setPlanetOptions","useEffect","getData","subscribe","p","i","label","englishName","value","Container","component","maxWidth","Typography","variant","Box","noValidate","onSubmit","event","preventDefault","FormData","currentTarget","sx","mt","Grid","container","spacing","item","xs","sm","Autocomplete","disablePortal","options","width","renderInput","params","TextField","Button","fullWidth","mb","Results","Root","path","element","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a418a27d.chunk.js","sourcesContent":["\nexport enum LOCALSTORAGE_KEY {\n    API_PLANETS = \"apiPlanets\",\n    API_ENGLISH_NAMES = \"apiEnglishNames\",\n    CLEANED_DF = \"cleanedDf\"\n}\n\n\nexport interface Body {\n    alternativeName: string\n    aphelion: number\n    argPeriapsis: number\n    aroundPlanet: {\n        planet: string,\n        rel: string\n    }\n    avgTemp: number\n    axialTilt: number\n    density: number\n    dimension: string\n    discoveredBy: string\n    discoveryDate: string\n    eccentricity: number\n    englishName: string\n    equaRadius: number\n    escape: number\n    flattening: number\n    gravity: number\n    id: string\n    inclination: number\n    isPlanet: false\n    longAscNode: number\n    mainAnomaly: number\n    mass: { massValue: number, massExponent: number }\n    meanRadius: number\n    moons: any | null\n    name?: string\n    perihelion: number\n    polarRadius: number\n    rel: string\n    semimajorAxis: number\n    sideralOrbit: number\n    sideralRotation: number\n    vol: any | null\n}\n\nexport interface BodyApiResponse {\n    bodies: Body[]\n}\n\nexport interface BodyOption {\n    label: string\n    value: number\n}\n\nexport interface CleanEnglishLexicon {\n    id: string\n    name: string\n}\n\nexport type PlanetsDataframe = Body[]","import axios, { AxiosResponse } from \"axios\"\nimport { stringify } from \"querystring\"\nimport { Body, BodyApiResponse, LOCALSTORAGE_KEY } from \"./types\"\n\n\n\n\n\nexport class ApiService {\n    private baseUrl = \"https://api.le-systeme-solaire.net/rest.php\"\n\n\n    get = async<T extends unknown> (url: string, queryParams: Record<string, string>): Promise<AxiosResponse<T>> => {\n        const urlWithParams = `${url}?${stringify(queryParams)}`\n        console.log(`GET ${url}`)\n        return axios.get(urlWithParams)\n    }\n\n    getOrCached = async (localStorageKey: LOCALSTORAGE_KEY, url: string, queryParams: Record<string, string>): Promise<Body[]> => {\n        const localString = localStorage.getItem(localStorageKey)\n        if (localString) {\n            const localResults = JSON.parse(localString) as Body[]\n            console.log(`using local copy of ${localStorageKey}`)\n            return new Promise((resolve, reject) => {\n                resolve(localResults)\n            })\n        } else {\n            console.log(`Local copy not found. Fetching ${localStorageKey} from API`)\n            const results = await this.get<BodyApiResponse>(url, queryParams)\n            localStorage.setItem(localStorageKey, JSON.stringify(results.data.bodies))\n            console.log(`Saved ${localStorageKey} to localStorage`)\n            return new Promise<Body[]>((resolve, reject) => {\n                resolve(results.data.bodies)\n            })\n\n        }\n\n    }\n    \n    fetchPlanets = async (excludedAttributes: string[]): Promise<Body[]> =>{\n        const url = `${this.baseUrl}/bodies`\n        const queryParams = {\n            filter: \"isPlanet,eq,true\",\n            exclude: excludedAttributes.join(\",\")\n        }\n        return this.getOrCached(LOCALSTORAGE_KEY.API_PLANETS, url, queryParams)\n    }\n\n    fetchEnglishNames = async () => {\n        const url = `${this.baseUrl}/bodies`\n        const queryParams = {\n            data: \"id,englishName\"\n        }\n        return this.getOrCached(LOCALSTORAGE_KEY.API_ENGLISH_NAMES, url, queryParams)\n    }\n}\n\nconst api = new ApiService()\nexport default api","\n\n\nexport enum AttrType {\n    STRING = \"string\",\n    NUMBERIC = \"numeric\",\n    DATE = \"date\",\n    LIST = \"list\" \n}\n\ninterface Attr {\n    attribute: string // the attribute name in the web service and the input dictionary\n    columnName: string // the corresponding column name in the dataframe after processing\n    type: AttrType\n    weight: number\n}\n\nexport const attrMap: Attr[] = [\n    {\n        attribute: \"englishName\",\n        columnName: \"englishName\",\n        type: AttrType.STRING,\n        weight: 0.2\n    },\n    {\n        attribute: \"moons\",\n        columnName: \"moonsEnglishName\",\n        type: AttrType.LIST,\n        weight: 0.15\n    },\n    {\n        attribute: \"perihelion\",\n        columnName: \"perihelion\",\n        type: AttrType.NUMBERIC,\n        weight: 0.05\n    },\n    {\n        attribute: \"aphelion\",\n        columnName: \"aphelion\",\n        type: AttrType.NUMBERIC,\n        weight: 0.05\n        },\n    {\n        attribute: \"mass\",\n        columnName: \"mass\",\n        // Expected as a numeric value in the dictionary input.\n        // It uses a value and exponent notation in the dataframe\n        type: AttrType.NUMBERIC,\n        weight: 0.05\n    }\n]","import api from \"../api-service\"\nimport { Body, CleanEnglishLexicon, LOCALSTORAGE_KEY, PlanetsDataframe } from \"../types\"\nimport { attrMap } from \"./attribute-map\"\n\n\n\ntype AttrType = \"string\" | \"numeric\" | \"date\" | \"list\" \n\ninterface Attr {\n    attribute: string // the attribute name in the web service and the input dictionary\n    columnName: string // the corresponding column name in the dataframe after processing\n    type: AttrType\n    weight: number\n}\n\n\nexport class BodyService {\n\n    ALL_ATTRIBUTES =   ['id', 'name', 'englishName', 'isPlanet', 'moons', 'semimajorAxis', \n      'perihelion', 'aphelion', 'eccentricity', 'inclination', 'density', \n      'gravity', 'escape', 'meanRadius', 'equaRadius', 'polarRadius', \n      'flattening', 'dimension', 'sideralOrbit', 'sideralRotation', \n      'aroundPlanet', 'discoveredBy', 'discoveryDate', 'alternativeName', \n      'axialTilt', 'mass', 'vol', 'rel']\n    \n\n    getDataframe = async (): Promise<PlanetsDataframe> => {\n        let df: Promise<PlanetsDataframe>\n        const str = localStorage.getItem(LOCALSTORAGE_KEY.CLEANED_DF)\n        if (!!str) {\n            // TODO Add error handling if JSON fails parse\n            const data = JSON.stringify(str)\n            df = new Promise((resolve, reject) => resolve(df))\n        } else {\n            df = this.buildDataframe()\n        }\n        return df\n    }\n\n    buildExcludedAttributes = (): string[] => {\n        const gameAttrs = attrMap.map(v => v.attribute)\n        gameAttrs.concat([\"id\", \"rel\"])\n\n        // Create a list of attrs to exlude by filter out game attrs from all attrs\n        const excludedAttrs = this.ALL_ATTRIBUTES.filter(attr => gameAttrs.indexOf(attr) < 0)\n\n        return excludedAttrs\n    }\n\n    buildDataframe = async(): Promise<PlanetsDataframe> => {\n        const excludedAttributes = this.buildExcludedAttributes()\n        const rawEnglishNames = api.fetchPlanets(excludedAttributes)\n        \n        const englishLexicon = await this.buildCleanEnglishLexicon()\n        \n        let df = await api.fetchPlanets(excludedAttributes)\n        df = this.cleanMoons(df, englishLexicon)\n        df = this.cleanAllFields(df)\n        console.log(`Save ${LOCALSTORAGE_KEY.CLEANED_DF} to localStorage`)\n        localStorage.setItem(LOCALSTORAGE_KEY.CLEANED_DF, JSON.stringify(df))\n        return df\n    }\n\n\n    cleanAllFields = (df: Body[]): Body[] => {\n        console.warn(\"NOT IMPLEMENTED\")\n        return df\n    }\n\n    cleanMoons = (df: Body[], englishLexicon: CleanEnglishLexicon[]): Body[] => {\n        console.warn(\"NOT IMPLEMENTED\")\n        return df\n    }\n\n    buildCleanEnglishLexicon = async (): Promise<CleanEnglishLexicon[]> => {\n        const rawNames = await api.fetchEnglishNames()\n        const cleanedNames = rawNames.map(raw => { return { id: raw.id, name: this.cleanName(raw) } })\n        return cleanedNames\n    } \n\n\n    cleanName = (rawEnglishName: Body): string => {\n        const re = /^(\\(\\d*\\)|\\d*)\\s*/\n        const str = (rawEnglishName.name ?? rawEnglishName.id)\n        const cleanedName = str.replace(re, \"\")\n        console.log(`Converted ${str} to ${cleanedName}`)\n        return cleanedName\n    }\n    \n}\n\nconst bodyService = new BodyService()\nexport default bodyService","import Autocomplete from '@mui/material/Autocomplete';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport TextField from '@mui/material/TextField';\nimport Typography from '@mui/material/Typography';\nimport { FC, useEffect, useState } from \"react\";\nimport api from \"../../api-service\";\nimport bodyService from '../../services/body.service';\nimport { Body, BodyOption } from '../../types';\n\n\nconst Home: FC = () => {\n    const [planets, setplanets] = useState<Body[]>()\n    const [planetOptions, setPlanetOptions] = useState<BodyOption[]>([])\n    \n    useEffect(() => {\n        const getData = async () => {\n            let subscribe = true\n            const results = await api.fetchPlanets([])\n            const englishNames = await api.fetchEnglishNames()\n            bodyService.buildDataframe()\n            if (subscribe) {\n                setplanets(results)\n                const planetOptions: BodyOption[] = results.map((p, i) => { return { label: p.englishName, value: i } })\n                setPlanetOptions(planetOptions)\n            }\n            subscribe = false\n        }\n        getData()\n    }, [setplanets])\n\n\n    \n    \n    \n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const data = new FormData(event.currentTarget);\n    }\n    \n    return (\n        <Container component=\"main\" maxWidth=\"md\">\n            <Typography component=\"h1\" variant=\"h5\">\n                Home    \n            </Typography>\n            <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12} sm={6}>\n                        <Autocomplete\n                            disablePortal\n                            id=\"planet-search\"\n                            options={planetOptions}\n                            sx={{ width: 300 }}\n                            renderInput={(params) => <TextField {...params} label=\"Planet\" />}\n                            />\n                    </Grid>\n                        <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                        sx={{ mt: 3, mb: 2 }}\n                        >\n                        Search\n                        </Button>\n                </Grid>\n            </Box>\n        </Container>\n    )\n}\n\nexport default Home","import { FC } from \"react\"\n\n\nconst Results: FC = () => {\n    return (\n        <div>\n            <h1>Results</h1>\n        </div>\n    )\n}\n\nexport default Results","import React, { FC } from \"react\";\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport './App.css';\nimport Home from \"./components/home/Home\";\nimport Results from \"./components/results/Results\";\n\nconst Root = () => {\n    return (\n        \n        <Routes>\n        <Route path=\"/\" element={  <Home/>} />\n           \n        <Route path=\"/results\" element={ <Results/>} />\n            \n        </Routes>\n  )\n}\n\n\nconst  App: FC = () => {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Root />\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}